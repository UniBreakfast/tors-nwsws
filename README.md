# [tors-nwsws](https://github.com/UniBreakfast/tors-nwsws)

### A project driven by Terms of Reference <br> on [node-web-server-with-stuff](https://www.npmjs.com/package/node-web-server-with-stuff) module

[stuff.cjs](https://gist.github.com/UniBreakfast/0c719583fc8f9a16361ab28136884a43)

### Press `Ctrl + Alt + Shift + D` to switch between Light / Dark Theme!

## Техническое задание

1. В проекте четыре html-страницы. Четвёртая требует авторизации. Первые три переадресуют пользователя на четвёртую, если он авторизован.
    1. Страница Гостевая - открывается по пути '/', содержит способы перейти на вторую (Регистрация) и третью (Вход).
    2. Страница Регистрация - путь '/register', содержит форму регистрации и кнопку перехода на страницу Вход.
        1. Форма регистрации содержит поля ввода для имени, логина, пароля, подтверждения пароля и кнопку выполнения регистрации.
        2. Регистрация не выполняется, если какие-то из полей не удовлетворяет требованиям:
            - имя не пустое, может содержать буквы, пробелы, дефисы, апострофы, точки;
            - логин уникальный, от 2 до 32 латинских букв, цифр, подчёркиваний;
            - пароль от 3 до 64 символов без пробелов;
            - подтверждение равняется паролю;
        3. После успешной регистрации гость переадресуется на страницу Вход
    3. Страница Вход - путь '/login', содержит форму входа и кнопку перехода на страницу Регистрация.
        1. Форма входа содержит поля ввода логина, пароля и кнопку выполнения входа.
        2. Вход не выполняется если одно из требований не выполняется:
            - логин и пароль содержат что-то кроме пробелов;
            - логин и пароль соответствуют какому-то из зарегистрированных пользователей;
        3. После успешного входа авторизованный пользователь переадресуется на четвёртую страницу (Пользователи).
    4. Страница Пользователи - путь '/users', содержит таблицу-список всех зарегистрированных пользователей (показаны имена и логины) и кнопку выхода (аннулирющую авторизацию).
2. В проекте шесть API-эндпоинтов. Все начинаются со '/api' и отвечают в формате json. Все могут использоваться страницами проекта или вручную.
    1. `/checkin` - проверяет куку на предмет соответствия токену одной из открытых сессий пользователя. Отвечает в формате {session: true/false}, если пользователь опознан/не опознан.
    2. `/isfree` - проверяет свободен ли логин (нет ли зарегистрированного пользователя с таким же). Отвечает в формате {vacant: true/false}.
    3. `/register` - добавляет пользователя к множеству зарегистрированных, если все данные валидны. Отвечает в формате {success: true/false}.
    4. `/login` - авторизует пользователя, выдавая ему куку с токеном, подтверждающим сессию на трое суток, если пара логин-пароль соответствуют указанным при регистрации одним из пользователей. Отвечает в формате {success: true/false}.
    5. `/users` - предоставляет массив объектов-пользователей в формате [{login, name}, ...], если при запросе есть кука с токеном, соответствующим актуальной сессии пользователя. При подтверждении кука обновляется на трое суток от момента.
    6. `/logout` - удаляет токен сессии пользователя из множества актуальных, если подтверждается его актуальность. Отвечает в формате {success: true/false}.
3. И страницы, и API обеспечиваются веб-сервером, реализованным с помощью nodeJS. Задание составлялось как ориентированное на конкретный модуль   https://www.npmjs.com/package/node-web-server-with-stuff с целью проверки его достаточности для обеспечения реализации описанного функционала


Дополнительные пожелания

A. Выполнять как можно скорее, не делая, по возможности, ничего из не указанного выше. Не занимаясь дополнительным неупомянутым выше функционалом, дизайном (достаточно любого бесклассового CSS-фреймворка) или базой данных (достаточно хранения в памяти сервера в течении времени его работы, а несколько пользователей могут быть захардкодены для быстрой демонстрации со старта).

Б. Не использовать JS-фреймворки, шаблоны и шаблонизаторы, библиотеки и модули, написанные за пределами данного проекта.

В. Воздержаться от реализации работы с реальной базой данных и с правильными шифрованием-проверкой паролей пользователей с использованием криптографии. И база, и пароли - тема отдельного Технического Задания, весь смысл которого в их выделенной реализации для данного проекта. Однако делать проект готовым к переходу на них тоже не нужно.

![image](https://github.com/user-attachments/assets/504e5749-ce50-4857-b05e-90d8b0431ff8)

![image](https://github.com/user-attachments/assets/90812262-f30e-4791-93c0-283e1256e6d3)

![image](https://github.com/user-attachments/assets/219af95a-2ad3-472a-a8fb-7d97a9f267b6)

![image](https://github.com/user-attachments/assets/a9dc6fd9-bcda-4b1b-a66f-47eb99c2a7f6)

![image](https://github.com/user-attachments/assets/c03c52c0-606e-42c6-8cba-2db11e722eac)

![image](https://github.com/user-attachments/assets/59b31803-c1b6-4654-8a53-8714cb8aaaf1)

![image](https://github.com/user-attachments/assets/04c32c7e-7efd-42df-8f88-d58346b903b2)

![image](https://github.com/user-attachments/assets/0a93455e-926c-45cb-892e-979255c3b1d5)

![image](https://github.com/user-attachments/assets/c3668392-f1dd-4010-9f8e-901629d411df)
